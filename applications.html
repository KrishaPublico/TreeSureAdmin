<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>Applications | TreeSure Admin</title>

  <link rel="stylesheet" href="css/applications.css">
  <link rel="stylesheet" href="css/sidebar.css">
  <link rel="stylesheet" href="css/topbar.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>

<body>
 <div id="sidebar-container"></div>
  <!-- MAIN CONTENT -->
  <div class="main-content">
     <div class="top-horizontal-bar"> </div>
    <h1>ðŸ—‚ Applications</h1>

    <h2 id="applicationTypeTitle" style="text-align:center; display:none;"></h2>
    <div id="applicantsContainer" class="applicant-list" style="display:none;"></div>

    <div id="filesSection" style="display:none;">
      <h2 id="applicantTitle"></h2>
      <table>
        <thead>
          <tr>
            <th>Label</th>
            <th>File Name</th>
            <th>Uploaded At</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody id="filesBody"></tbody>
      </table>

      <div id="scheduleContainer" style="display:none; gap:10px; justify-content:center;">
        <button id="scheduleBtn" class="action-btn-main">Schedule Walk-in Appointment</button>
        <button id="proceedBtn" class="action-btn-main" style="display:none;">Proceed to Tree Inventory</button>
        <button id="assignCuttingForesterBtn" class="action-btn-main" style="display:none;">Assign Forester for Cutting</button>
        <button id="commentBtn" class="action-btn-secondary">Comment</button>
      </div>
    </div>

    <!-- Modals (Schedule, Inventory, Comment, Cutting, File Preview) -->
    <!-- ...keep all your modal HTML as it is (scheduleModal, inventoryModal, commentModal, cuttingForesterModal, filePreviewModal) ... -->

  </div>

  <!-- ----------------- DYNAMIC SIDEBAR & BUTTON HANDLERS ----------------- -->
 <!-- Load Sidebar Dynamically -->
  <script>
    fetch("sidebar.html")
  .then(res => res.text())
  .then(html => {
    document.getElementById("sidebar-container").innerHTML = html;

    // Highlight the active page link
    const current = window.location.pathname.split("/").pop();
    document.querySelectorAll(".sidebar a").forEach(link => {
      if (link.getAttribute("href") === current) {
        link.classList.add("active");
      }
    });

    // Logout handler
    const logoutBtn = document.getElementById("logoutBtn");
    if (logoutBtn) {
      logoutBtn.addEventListener("click", e => {
        e.preventDefault();
        localStorage.clear();
        window.location.href = "login.html";
      });
    }

    // --------- ADD DROPDOWN FUNCTIONALITY ---------

    // Main Applications dropdown
    document.querySelectorAll(".dropdown-toggle").forEach(drop => {
      drop.addEventListener("click", e => {
        e.preventDefault(); // prevent link jump
        drop.parentElement.classList.toggle("open");
      });
    });

    // Sub-dropdown (Cutting Permit)
    document.querySelectorAll(".sub-toggle").forEach(sub => {
      sub.addEventListener("click", e => {
        e.preventDefault();
        const subMenu = sub.nextElementSibling;
        subMenu.classList.toggle("open");
      });
    });

    // ---------------------------------------------
  });

  </script>

 <!-- SCRIPTS -->
  <script type="module" src="js/application.js"></script>


</body>
</html>
