<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Settings | TreeSure</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/sidebar.css">
  <link rel="stylesheet" href="css/topbar.css">
  <!-- Font Awesome Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

</head>
<body onload="checkLogin()">

    <div id="sidebar-container"></div>


  <!-- Main Content -->
  <div class="main-content">
   
        <div class="top-horizontal-bar"> </div>
    <h1>âš™ Settings</h1>
    <ul class="settings-list">
      <li>ğŸ”‘ Change Password</li>
      <li>ğŸ‘¨â€ğŸ’» Manage Admin Accounts</li>
      <li>âš¡ System Preferences</li>
    </ul>
  </div>



   <!-- Load Sidebar Dynamically -->
  <!-- Load Sidebar Dynamically -->
  <script>
    fetch("sidebar.html")
  .then(res => res.text())
  .then(html => {
    document.getElementById("sidebar-container").innerHTML = html;

    // Highlight the active page link
    const current = window.location.pathname.split("/").pop();
    document.querySelectorAll(".sidebar a").forEach(link => {
      if (link.getAttribute("href") === current) {
        link.classList.add("active");
      }
    });

    // Logout handler
    const logoutBtn = document.getElementById("logoutBtn");
    if (logoutBtn) {
      logoutBtn.addEventListener("click", e => {
        e.preventDefault();
        localStorage.clear();
        window.location.href = "login.html";
      });
    }

    // --------- ADD DROPDOWN FUNCTIONALITY ---------

    // Main Applications dropdown
    document.querySelectorAll(".dropdown-toggle").forEach(drop => {
      drop.addEventListener("click", e => {
        e.preventDefault(); // prevent link jump
        drop.parentElement.classList.toggle("open");
      });
    });

    // Sub-dropdown (Cutting Permit)
    document.querySelectorAll(".sub-toggle").forEach(sub => {
      sub.addEventListener("click", e => {
        e.preventDefault();
        const subMenu = sub.nextElementSibling;
        subMenu.classList.toggle("open");
      });
    });

    // ---------------------------------------------
  });

  </script>
<!-- Load your Firebase script as a module -->
  <script type="module">
  import { checkLogin, logout } from "./js/script.js";

    // Run login check on load
    checkLogin();

    // Hook up logout button
    document.getElementById("logoutBtn").addEventListener("click", (e) => {
      e.preventDefault();
      logout();
    });
  </script>
</body>
</html>
